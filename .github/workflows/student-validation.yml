name: Student Progress Tracker

on:
  push:
    branches: ["**"]
  pull_request:
    branches: ["**"]

jobs:
  # Detect if this is a student fork or the main repository
  detect-environment:
    name: Detect Environment
    runs-on: ubuntu-latest
    outputs:
      is_fork: ${{ steps.check.outputs.is_fork }}
      matrix: ${{ steps.set-matrix.outputs.matrix }}
    steps:
      - name: Check if fork or study branch
        id: check
        run: |
          # Enable validation on forks OR study/student/practice/learning/exercise branches
          if [ "${{ github.repository }}" != "AlyxPink/go-training" ] || \
             [[ "${{ github.ref }}" =~ ^refs/heads/(study|student|practice|learning|exercise)/ ]]; then
            echo "is_fork=true" >> $GITHUB_OUTPUT
            echo "âœ… Running validation: ${{ github.repository }} on ${{ github.ref }}"
          else
            echo "is_fork=false" >> $GITHUB_OUTPUT
            echo "â„¹ï¸  Running on main repository - skipping student validation"
          fi

      - uses: actions/checkout@v4
        if: steps.check.outputs.is_fork == 'true'

      - name: Generate exercise matrix
        if: steps.check.outputs.is_fork == 'true'
        id: set-matrix
        run: |
          exercises=$(find . -name "go.mod" -path "*/[0-9]*" | sed 's|/go.mod||' | sed 's|^./||' | jq -R -s -c 'split("\n")[:-1]')
          echo "matrix=$exercises" >> $GITHUB_OUTPUT
          echo "Found exercises: $exercises"

  # Test Basics Module (01-basics)
  test-basics:
    name: "Basics: ${{ matrix.exercise }}"
    needs: detect-environment
    if: needs.detect-environment.outputs.is_fork == 'true'
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        exercise:
          - 01-string-manipulation
          - 02-number-operations
          - 03-array-basics
          - 04-slice-operations
          - 05-map-fundamentals
          - 06-struct-basics
          - 07-pointer-mechanics
          - 08-error-handling
          - 09-variadic-functions
          - 10-type-conversions
          - 11-constants-enums
          - 12-control-flow
          - 13-defer-panic-recover
          - 14-closures
          - 15-recursion

    steps:
      - uses: actions/checkout@v4

      - name: Set up Go
        uses: actions/setup-go@v5
        with:
          go-version: '1.22'

      - name: Check exercise structure
        working-directory: 01-basics/${{ matrix.exercise }}
        run: |
          if [ ! -f "go.mod" ]; then
            echo "âŒ No go.mod found"
            exit 1
          fi
          if [ ! -f "main.go" ]; then
            echo "âŒ No main.go found"
            exit 1
          fi
          if [ ! -f "main_test.go" ]; then
            echo "âŒ No main_test.go found"
            exit 1
          fi
          echo "âœ… Exercise structure valid"

      - name: Download dependencies
        working-directory: 01-basics/${{ matrix.exercise }}
        run: |
          go mod download
          go mod verify

      - name: Run gofmt check
        working-directory: 01-basics/${{ matrix.exercise }}
        run: |
          unformatted=$(gofmt -l main.go)
          if [ -n "$unformatted" ]; then
            echo "âŒ Code is not properly formatted"
            echo "Run: gofmt -w main.go"
            gofmt -d main.go
            exit 1
          fi
          echo "âœ… Code is properly formatted"

      - name: Run go vet
        working-directory: 01-basics/${{ matrix.exercise }}
        run: |
          if go vet ./...; then
            echo "âœ… No vet warnings"
          else
            echo "âŒ Vet found issues"
            exit 1
          fi

      - name: Run tests
        working-directory: 01-basics/${{ matrix.exercise }}
        run: |
          echo "ðŸ§ª Testing student implementation..."
          if go test -v -cover ./...; then
            echo "âœ… All tests passed!"
          else
            echo "âŒ Tests failed - keep working on this exercise!"
            exit 1
          fi

  # Test Intermediate Module (02-intermediate)
  test-intermediate:
    name: "Intermediate: ${{ matrix.exercise }}"
    needs: detect-environment
    if: needs.detect-environment.outputs.is_fork == 'true'
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        exercise:
          - 01-interfaces
          - 02-method-receivers
          - 03-composition
          - 04-json-marshaling
          - 05-file-operations
          - 06-csv-processing
          - 07-flag-parsing
          - 08-logging
          - 09-regex-patterns
          - 10-sorting
          - 11-generics-basics
          - 12-packages
          - 13-testing-basics
          - 14-http-client
          - 15-http-server

    steps:
      - uses: actions/checkout@v4

      - name: Set up Go
        uses: actions/setup-go@v5
        with:
          go-version: '1.22'

      - name: Check exercise structure
        working-directory: 02-intermediate/${{ matrix.exercise }}
        run: |
          if [ ! -f "go.mod" ]; then
            echo "âŒ No go.mod found"
            exit 1
          fi
          if [ ! -f "main.go" ]; then
            echo "âŒ No main.go found"
            exit 1
          fi
          if [ ! -f "main_test.go" ]; then
            echo "âŒ No main_test.go found"
            exit 1
          fi
          echo "âœ… Exercise structure valid"

      - name: Download dependencies
        working-directory: 02-intermediate/${{ matrix.exercise }}
        run: |
          go mod download
          go mod verify

      - name: Run gofmt check
        working-directory: 02-intermediate/${{ matrix.exercise }}
        run: |
          unformatted=$(gofmt -l main.go)
          if [ -n "$unformatted" ]; then
            echo "âŒ Code is not properly formatted"
            echo "Run: gofmt -w main.go"
            gofmt -d main.go
            exit 1
          fi
          echo "âœ… Code is properly formatted"

      - name: Run go vet
        working-directory: 02-intermediate/${{ matrix.exercise }}
        run: |
          if go vet ./...; then
            echo "âœ… No vet warnings"
          else
            echo "âŒ Vet found issues"
            exit 1
          fi

      - name: Run tests
        working-directory: 02-intermediate/${{ matrix.exercise }}
        run: |
          echo "ðŸ§ª Testing student implementation..."
          if go test -v -cover ./...; then
            echo "âœ… All tests passed!"
          else
            echo "âŒ Tests failed - keep working on this exercise!"
            exit 1
          fi

  # Test Concurrency Module (03-concurrency)
  test-concurrency:
    name: "Concurrency: ${{ matrix.exercise }}"
    needs: detect-environment
    if: needs.detect-environment.outputs.is_fork == 'true'
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        exercise:
          - 01-goroutines-intro
          - 02-channels-basics
          - 03-channel-patterns
          - 04-select-statement
          - 05-context-management
          - 06-mutex-rwmutex
          - 07-atomic-operations
          - 08-race-detector
          - 09-rate-limiting
          - 10-producer-consumer
          - 11-concurrent-cache
          - 12-task-scheduler
          - 13-graceful-shutdown
          - 14-parallel-processing
          - 15-sync-primitives

    steps:
      - uses: actions/checkout@v4

      - name: Set up Go
        uses: actions/setup-go@v5
        with:
          go-version: '1.22'

      - name: Check exercise structure
        working-directory: 03-concurrency/${{ matrix.exercise }}
        run: |
          if [ ! -f "go.mod" ]; then
            echo "âŒ No go.mod found"
            exit 1
          fi
          if [ ! -f "main.go" ]; then
            echo "âŒ No main.go found"
            exit 1
          fi
          if [ ! -f "main_test.go" ]; then
            echo "âŒ No main_test.go found"
            exit 1
          fi
          echo "âœ… Exercise structure valid"

      - name: Download dependencies
        working-directory: 03-concurrency/${{ matrix.exercise }}
        run: |
          go mod download
          go mod verify

      - name: Run gofmt check
        working-directory: 03-concurrency/${{ matrix.exercise }}
        run: |
          unformatted=$(gofmt -l main.go)
          if [ -n "$unformatted" ]; then
            echo "âŒ Code is not properly formatted"
            echo "Run: gofmt -w main.go"
            gofmt -d main.go
            exit 1
          fi
          echo "âœ… Code is properly formatted"

      - name: Run go vet
        working-directory: 03-concurrency/${{ matrix.exercise }}
        run: |
          if go vet ./...; then
            echo "âœ… No vet warnings"
          else
            echo "âŒ Vet found issues"
            exit 1
          fi

      - name: Run tests
        working-directory: 03-concurrency/${{ matrix.exercise }}
        run: |
          echo "ðŸ§ª Testing student implementation..."
          if go test -v -cover ./...; then
            echo "âœ… All tests passed!"
          else
            echo "âŒ Tests failed - keep working on this exercise!"
            exit 1
          fi

      - name: Run race detector
        working-directory: 03-concurrency/${{ matrix.exercise }}
        run: |
          echo "ðŸ Running race detector..."
          if go test -race -short -v ./...; then
            echo "âœ… No race conditions detected"
          else
            echo "âŒ Race conditions found"
            exit 1
          fi

  # Test Advanced Module (04-advanced)
  test-advanced:
    name: "Advanced: ${{ matrix.exercise }}"
    needs: detect-environment
    if: needs.detect-environment.outputs.is_fork == 'true'
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        exercise:
          - 01-custom-errors
          - 02-reflection-basics
          - 03-code-generation
          - 04-benchmarking
          - 05-testing-advanced
          - 06-dependency-injection
          - 07-database-access
          - 08-orm-patterns
          - 09-websockets
          - 10-grpc-basics
          - 11-template-engine
          - 12-plugin-system
          - 13-memory-optimization
          - 14-cgo-basics
          - 15-build-tools

    steps:
      - uses: actions/checkout@v4

      - name: Set up Go
        uses: actions/setup-go@v5
        with:
          go-version: '1.22'

      - name: Check exercise structure
        working-directory: 04-advanced/${{ matrix.exercise }}
        run: |
          if [ ! -f "go.mod" ]; then
            echo "âŒ No go.mod found"
            exit 1
          fi
          if [ ! -f "main.go" ]; then
            echo "âŒ No main.go found"
            exit 1
          fi
          if [ ! -f "main_test.go" ]; then
            echo "âŒ No main_test.go found"
            exit 1
          fi
          echo "âœ… Exercise structure valid"

      - name: Download dependencies
        working-directory: 04-advanced/${{ matrix.exercise }}
        run: |
          go mod download
          go mod verify

      - name: Run gofmt check
        working-directory: 04-advanced/${{ matrix.exercise }}
        run: |
          unformatted=$(gofmt -l main.go)
          if [ -n "$unformatted" ]; then
            echo "âŒ Code is not properly formatted"
            echo "Run: gofmt -w main.go"
            gofmt -d main.go
            exit 1
          fi
          echo "âœ… Code is properly formatted"

      - name: Run go vet
        working-directory: 04-advanced/${{ matrix.exercise }}
        run: |
          if go vet ./...; then
            echo "âœ… No vet warnings"
          else
            echo "âŒ Vet found issues"
            exit 1
          fi

      - name: Run tests
        working-directory: 04-advanced/${{ matrix.exercise }}
        run: |
          echo "ðŸ§ª Testing student implementation..."
          if go test -v -cover ./...; then
            echo "âœ… All tests passed!"
          else
            echo "âŒ Tests failed - keep working on this exercise!"
            exit 1
          fi

  # Test Projects Module (05-projects)
  test-projects:
    name: "Projects: ${{ matrix.exercise }}"
    needs: detect-environment
    if: needs.detect-environment.outputs.is_fork == 'true'
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        exercise:
          - 01-cli-tool
          - 02-rest-api
          - 03-concurrent-crawler
          - 04-key-value-store
          - 05-distributed-task-queue

    steps:
      - uses: actions/checkout@v4

      - name: Set up Go
        uses: actions/setup-go@v5
        with:
          go-version: '1.22'

      - name: Check exercise structure
        working-directory: 05-projects/${{ matrix.exercise }}
        run: |
          if [ ! -f "go.mod" ]; then
            echo "âŒ No go.mod found"
            exit 1
          fi
          if [ ! -f "main.go" ]; then
            echo "âŒ No main.go found"
            exit 1
          fi
          if [ ! -f "main_test.go" ]; then
            echo "âŒ No main_test.go found"
            exit 1
          fi
          echo "âœ… Exercise structure valid"

      - name: Download dependencies
        working-directory: 05-projects/${{ matrix.exercise }}
        run: |
          go mod download
          go mod verify

      - name: Run gofmt check
        working-directory: 05-projects/${{ matrix.exercise }}
        run: |
          unformatted=$(gofmt -l main.go)
          if [ -n "$unformatted" ]; then
            echo "âŒ Code is not properly formatted"
            echo "Run: gofmt -w main.go"
            gofmt -d main.go
            exit 1
          fi
          echo "âœ… Code is properly formatted"

      - name: Run go vet
        working-directory: 05-projects/${{ matrix.exercise }}
        run: |
          if go vet ./...; then
            echo "âœ… No vet warnings"
          else
            echo "âŒ Vet found issues"
            exit 1
          fi

      - name: Run tests
        working-directory: 05-projects/${{ matrix.exercise }}
        run: |
          echo "ðŸ§ª Testing student implementation..."
          if go test -v -cover ./...; then
            echo "âœ… All tests passed!"
          else
            echo "âŒ Tests failed - keep working on this exercise!"
            exit 1
          fi

  # Run golangci-lint on all student code
  quality-checks:
    name: Code Quality Checks
    needs: detect-environment
    if: needs.detect-environment.outputs.is_fork == 'true'
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: Set up Go
        uses: actions/setup-go@v5
        with:
          go-version: '1.22'

      - name: Install golangci-lint
        run: |
          curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh | sh -s -- -b $(go env GOPATH)/bin v1.55.2
          echo "$(go env GOPATH)/bin" >> $GITHUB_PATH

      - name: Run golangci-lint
        run: |
          for exercise in $(find . -name "go.mod" -path "*/[0-9]*" | sed 's|/go.mod||' | sed 's|^./||'); do
            echo "ðŸ” Linting $exercise..."
            cd "$exercise"

            if golangci-lint run --config ../.golangci.yml main.go; then
              echo "âœ… $exercise: No lint issues"
            else
              echo "âš ï¸  $exercise: Lint issues found"
            fi

            cd - > /dev/null
          done

  # Track progress and generate summary
  track-progress:
    name: Progress Tracker
    needs: [detect-environment, test-basics, test-intermediate, test-concurrency, test-advanced, test-projects]
    if: |
      always() &&
      needs.detect-environment.outputs.is_fork == 'true'
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Calculate progress by module
        id: progress
        run: |
          echo "## Module Progress" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY

          # Count exercises per module
          basics_total=15
          intermediate_total=15
          concurrency_total=15
          advanced_total=15
          projects_total=5
          total=$((basics_total + intermediate_total + concurrency_total + advanced_total + projects_total))

          echo "total=$total" >> $GITHUB_OUTPUT
          echo "Total exercises: $total" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY

          # Module status summary
          echo "| Module | Exercises | Status |" >> $GITHUB_STEP_SUMMARY
          echo "|--------|-----------|--------|" >> $GITHUB_STEP_SUMMARY
          echo "| ðŸ“š Basics | 15 | ${{ needs.test-basics.result == 'success' && 'âœ… All passing' || 'ðŸŸ¡ In progress' }} |" >> $GITHUB_STEP_SUMMARY
          echo "| ðŸ”§ Intermediate | 15 | ${{ needs.test-intermediate.result == 'success' && 'âœ… All passing' || 'ðŸŸ¡ In progress' }} |" >> $GITHUB_STEP_SUMMARY
          echo "| âš¡ Concurrency | 15 | ${{ needs.test-concurrency.result == 'success' && 'âœ… All passing' || 'ðŸŸ¡ In progress' }} |" >> $GITHUB_STEP_SUMMARY
          echo "| ðŸš€ Advanced | 15 | ${{ needs.test-advanced.result == 'success' && 'âœ… All passing' || 'ðŸŸ¡ In progress' }} |" >> $GITHUB_STEP_SUMMARY
          echo "| ðŸŽ¯ Projects | 5 | ${{ needs.test-projects.result == 'success' && 'âœ… All passing' || 'ðŸŸ¡ In progress' }} |" >> $GITHUB_STEP_SUMMARY

      - name: Generate progress badge
        run: |
          mkdir -p .github/badges

          # Create SVG badge (placeholder - would be generated based on actual results)
          cat > .github/badges/progress.svg << 'EOF'
          <svg xmlns="http://www.w3.org/2000/svg" width="140" height="20">
            <linearGradient id="b" x2="0" y2="100%">
              <stop offset="0" stop-color="#bbb" stop-opacity=".1"/>
              <stop offset="1" stop-opacity=".1"/>
            </linearGradient>
            <mask id="a">
              <rect width="140" height="20" rx="3" fill="#fff"/>
            </mask>
            <g mask="url(#a)">
              <path fill="#555" d="M0 0h70v20H0z"/>
              <path fill="#007ec6" d="M70 0h70v20H70z"/>
              <path fill="url(#b)" d="M0 0h140v20H0z"/>
            </g>
            <g fill="#fff" text-anchor="middle" font-family="DejaVu Sans,Verdana,Geneva,sans-serif" font-size="11">
              <text x="35" y="15" fill="#010101" fill-opacity=".3">Progress</text>
              <text x="35" y="14">Progress</text>
              <text x="105" y="15" fill="#010101" fill-opacity=".3">0/65</text>
              <text x="105" y="14">0/65</text>
            </g>
          </svg>
          EOF

      - name: Create completion matrix
        run: |
          cat > PROGRESS.md << 'EOF'
          # My Go Training Progress

          Track your progress through the 65 Go exercises!

          ## Progress Overview

          - **Completed**: 0/65 (0%)
          - **In Progress**: Check failing tests below
          - **Not Started**: All exercises

          ## Exercise Completion Status

          ### Basics (0/15)

          | Exercise | Status | Notes |
          |----------|--------|-------|
          | 01-string-manipulation | âŒ | Not started |
          | 02-number-operations | âŒ | Not started |
          | 03-arrays-slices | âŒ | Not started |
          | 04-maps | âŒ | Not started |
          | 05-functions | âŒ | Not started |
          | 06-pointers | âŒ | Not started |
          | 07-structs | âŒ | Not started |
          | 08-methods | âŒ | Not started |
          | 09-control-flow | âŒ | Not started |
          | 10-loops | âŒ | Not started |
          | 11-constants-enums | âŒ | Not started |
          | 12-type-conversion | âŒ | Not started |
          | 13-json-handling | âŒ | Not started |
          | 14-file-io | âŒ | Not started |
          | 15-command-line-args | âŒ | Not started |

          ### Intermediate (0/15)

          | Exercise | Status | Notes |
          |----------|--------|-------|
          | 01-interfaces | âŒ | Not started |
          | 02-errors | âŒ | Not started |
          | 03-defer-panic-recover | âŒ | Not started |
          | 04-variadic-functions | âŒ | Not started |
          | 05-closures | âŒ | Not started |
          | 06-recursion | âŒ | Not started |
          | 07-type-assertions | âŒ | Not started |
          | 08-string-formatting | âŒ | Not started |
          | 09-testing | âŒ | Not started |
          | 10-benchmarking | âŒ | Not started |
          | 11-generics-basics | âŒ | Not started |
          | 12-packages | âœ… | Teaching exercise |
          | 13-sorting | âŒ | Not started |
          | 14-custom-sort | âŒ | Not started |
          | 15-http-server | âœ… | Teaching exercise |

          ### Concurrency (0/15)

          | Exercise | Status | Notes |
          |----------|--------|-------|
          | 01-goroutines | âŒ | Not started |
          | 02-channels | âŒ | Not started |
          | 03-buffered-channels | âŒ | Not started |
          | 04-channel-select | âŒ | Not started |
          | 05-worker-pools | âŒ | Not started |
          | 06-waitgroups | âŒ | Not started |
          | 07-mutexes | âŒ | Not started |
          | 08-race-detector | âŒ | Not started |
          | 09-atomic | âŒ | Not started |
          | 10-producer-consumer | âŒ | Not started |
          | 11-concurrent-cache | âŒ | Not started |
          | 12-task-scheduler | âŒ | Not started |
          | 13-context | âŒ | Not started |
          | 14-parallel-processing | âŒ | Not started |
          | 15-sync-primitives | âŒ | Not started |

          ### Advanced (0/15)

          | Exercise | Status | Notes |
          |----------|--------|-------|
          | 01-custom-errors | âŒ | Not started |
          | 02-empty-interface | âŒ | Not started |
          | 03-type-embedding | âŒ | Not started |
          | 04-reflection | âŒ | Not started |
          | 05-generics-advanced | âŒ | Not started |
          | 06-build-tags | âŒ | Not started |
          | 07-database-access | âœ… | Teaching exercise |
          | 08-middleware | âŒ | Not started |
          | 09-websockets | âŒ | Not started |
          | 10-grpc-basics | âŒ | Not started |
          | 11-testing-advanced | âŒ | Not started |
          | 12-code-generation | âŒ | Not started |
          | 13-ast-manipulation | âŒ | Not started |
          | 14-cgo-basics | âŒ | Not started |
          | 15-performance-optimization | âŒ | Not started |

          ### Projects (0/5)

          | Exercise | Status | Notes |
          |----------|--------|-------|
          | 01-cli-tool | âŒ | Not started |
          | 02-rest-api | âŒ | Not started |
          | 03-web-scraper | âŒ | Not started |
          | 04-key-value-store | âŒ | Not started |
          | 05-distributed-task-queue | âŒ | Not started |

          ---

          **Note**: This file is auto-generated. Update status by pushing code that passes tests!

          **Legend**:
          - âœ… Complete (all tests pass)
          - ðŸŸ¡ In Progress (some tests pass)
          - âŒ Not Started (tests fail)
          - ðŸ“š Teaching Exercise (complete implementation provided)
          EOF

      - name: Generate summary
        run: |
          cat >> $GITHUB_STEP_SUMMARY << 'EOF'
          ## ðŸŽ¯ Go Training Progress

          ### Learning Path Structure
          The exercises are organized into 5 progressive modules:

          1. **ðŸ“š Basics** (15 exercises) - Core Go fundamentals
          2. **ðŸ”§ Intermediate** (15 exercises) - Intermediate patterns and libraries
          3. **âš¡ Concurrency** (15 exercises) - Goroutines, channels, and synchronization
          4. **ðŸš€ Advanced** (15 exercises) - Advanced techniques and integrations
          5. **ðŸŽ¯ Projects** (5 exercises) - Complete application projects

          ### Your Progress
          Check the module status table above to see which modules you've completed!
          - âœ… **All passing** = Module complete, move to the next one
          - ðŸŸ¡ **In progress** = Some exercises still need work
          - Expand each module section in the Actions UI to see individual exercise results

          ### Getting Started
          1. **Start with Basics**: Begin with `01-basics/01-string-manipulation`
          2. **Read the README**: Each exercise has instructions and requirements
          3. **Implement & Test**: Code in `main.go`, test with `go test -v`
          4. **Push & Validate**: GitHub Actions will validate your solution
          5. **Complete the Module**: Finish all 15 exercises before moving to Intermediate

          ### Getting Help
          - Check `HINTS.md` in each exercise for guidance
          - Look at test cases in `main_test.go` to understand requirements
          - Teaching exercises have complete implementations to learn from:
            - `02-intermediate/12-packages`
            - `02-intermediate/15-http-server`
            - `04-advanced/07-database-access`

          ### Quality Standards
          Every exercise is automatically validated for:
          - âœ… Tests passing
          - âœ… Proper formatting (gofmt)
          - âœ… No vet warnings
          - âœ… Code quality (golangci-lint)
          - âœ… Race conditions (concurrency exercises only)

          Keep going! Complete one module at a time! ðŸš€
          EOF

  # Summary job that always runs
  summary:
    name: Validation Summary
    needs: [detect-environment, test-basics, test-intermediate, test-concurrency, test-advanced, test-projects, quality-checks, track-progress]
    if: always() && needs.detect-environment.outputs.is_fork == 'true'
    runs-on: ubuntu-latest

    steps:
      - name: Module Summary
        run: |
          echo "## ðŸŽ“ Go Training Validation Complete"
          echo ""
          echo "### Module Results"
          echo ""
          echo "- ðŸ“š **Basics**: ${{ needs.test-basics.result == 'success' && 'âœ… All passing' || needs.test-basics.result == 'failure' && 'âŒ Some failing' || 'â­ï¸ Skipped' }}"
          echo "- ðŸ”§ **Intermediate**: ${{ needs.test-intermediate.result == 'success' && 'âœ… All passing' || needs.test-intermediate.result == 'failure' && 'âŒ Some failing' || 'â­ï¸ Skipped' }}"
          echo "- âš¡ **Concurrency**: ${{ needs.test-concurrency.result == 'success' && 'âœ… All passing' || needs.test-concurrency.result == 'failure' && 'âŒ Some failing' || 'â­ï¸ Skipped' }}"
          echo "- ðŸš€ **Advanced**: ${{ needs.test-advanced.result == 'success' && 'âœ… All passing' || needs.test-advanced.result == 'failure' && 'âŒ Some failing' || 'â­ï¸ Skipped' }}"
          echo "- ðŸŽ¯ **Projects**: ${{ needs.test-projects.result == 'success' && 'âœ… All passing' || needs.test-projects.result == 'failure' && 'âŒ Some failing' || 'â­ï¸ Skipped' }}"
          echo ""
          echo "### Next Steps"
          echo "1. Review individual exercise results above (grouped by module)"
          echo "2. Focus on exercises marked with âŒ"
          echo "3. Run \`go test -v\` locally to debug failures"
          echo "4. Push your fixes and watch the tests turn green!"
          echo ""
          echo "Keep going! You've got this! ðŸ’ª"
